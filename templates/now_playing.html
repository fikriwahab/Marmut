<!-- now_playing.html -->
{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
  <h2>Now Playing</h2>
  <div class="card song-card">
    <div class="card-body now-playing-card">
      <h5 class="card-title">Song Information</h5>
      <p class="card-text">Judul: Song1</p>
      <p class="card-text">Artist: Artist1</p>
      <p class="card-text">Durasi: 3 menit</p>
      <p class="card-text">Album: Album1</p>
      <p class="card-text">Genre(s): Genre1, Genre2</p>
      <p class="card-text">Tanggal Rilis: 18/03/24</p>
      <p class="card-text">Tahun: 2024</p>
      <p class="card-text">Total Play: 0</p>
      <p class="card-text">Total Downloads: 0</p>
      <div class="progress m-4">
        <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <a href="#" id="playButton" class="btn btn-primary">Play</a>
      <a href="#" id="addToPlaylistButton" class="btn btn-success">Add to Playlist</a>
      <a href="#" id="downloadButton" class="btn btn-info">Download</a>      
    </div>
  </div>
</div>
<!-- addToPlaylistModal modal -->
<div class="modal fade" id="addToPlaylistModal" tabindex="-1" role="dialog" aria-labelledby="addToPlaylistModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addToPlaylistModalLabel">Add to Playlist</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- ADD SONG TO USER PLAYLIST form -->
          <form id="addToPlaylistForm">
            <div class="form-group">
              <label for="songTitle">Judul:</label>
              <input type="text" class="form-control" id="songTitle" value="Song1" readonly>
            </div>
            <div class="form-group">
              <label for="songArtist">Artist:</label>
              <input type="text" class="form-control" id="songArtist" value="Artist1" readonly>
            </div>
            <div class="form-group">
              <label for="playlist">Playlist:</label>
              <select class="form-control" id="playlist" required>
                <option value="">Select Playlist</option>
                <!-- Dynamically populate options with user's playlists -->
                <option value="playlist1">Playlist 1</option>
                <option value="playlist2">Playlist 2</option>
                <!-- Add more options here as needed -->
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Tambah</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Kembali</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
<script>
    document.addEventListener("DOMContentLoaded", function () {
    // Add to Playlist action
    var addToPlaylistBtn = document.getElementById("addToPlaylistButton");
    addToPlaylistBtn.addEventListener("click", function (event) {
        event.preventDefault();
        // Open the modal to select playlist
        $('#addToPlaylistModal').modal('show');
    });

    // Download action
    var downloadBtn = document.getElementById("downloadButton");
    downloadBtn.addEventListener("click", function (event) {
        event.preventDefault();
        alert("Berhasil mengunduh Lagu dengan judul ‘Song1’!");
        // Redirect to the list of downloaded songs page
        // window.location.href = "/list-downloaded-songs";
    });
});

</script>
{% endblock %}
